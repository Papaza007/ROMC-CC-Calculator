<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RO Status Calculator (9 Inputs)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Security Styles: Disable Selection & Print */
        body { 
            -webkit-user-select: none; 
            -moz-user-select: none; 
            -ms-user-select: none; 
            user-select: none; 
            background-color: #111827; /* Dark BG */
        }
        @media print { body { display: none; } }
        
        /* Input Styling */
        .input-box {
            background-color: #374151;
            border: 1px solid #4b5563;
            color: #f3f4f6;
            border-radius: 0.375rem;
            padding: 0.5rem 0.75rem;
            width: 100%;
            transition: border-color 0.2s;
        }
        .input-box:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 1px #3b82f6;
        }
        .label-text {
            color: #9ca3af;
            font-size: 0.875rem;
            font-weight: 500;
            margin-bottom: 0.25rem;
            display: block;
        }
        .hint-text {
            color: #6b7280;
            font-size: 0.75rem;
            margin-top: 0.25rem;
        }
    </style>
    <script>
        // --- Security Layer: Anti-Debug & Anti-Copy ---
        document.addEventListener('contextmenu', e => e.preventDefault());
        document.addEventListener('keydown', e => {
            if (e.key === 'F12' || 
                (e.ctrlKey && e.shiftKey && ['I','J','C'].includes(e.key)) || 
                (e.ctrlKey && e.key === 'u')) {
                e.preventDefault();
                return false;
            }
        });
    </script>
</head>
<body class="min-h-screen flex items-center justify-center p-4">

    <div class="w-full max-w-2xl bg-gray-800 rounded-xl shadow-2xl border border-gray-700 overflow-hidden">
        
        <div class="bg-gradient-to-r from-indigo-600 to-blue-600 p-5 text-center shadow-md relative">
            <h1 class="text-2xl font-bold text-white tracking-wide">STATUS CALCULATOR</h1>
            <div class="absolute top-2 right-2 text-indigo-200 text-xs border border-indigo-400 rounded px-1">v2.0</div>
        </div>

        <div class="p-6 space-y-5">
            
            <div>
                <label class="label-text">[1] เลือกสถานะ (Select Status)</label>
                <select id="i1" class="input-box bg-gray-900">
                    </select>
                <div class="flex justify-between mt-1 px-1">
                    <span id="hint-atk" class="text-xs text-green-400"></span>
                    <span id="hint-def" class="text-xs text-red-400"></span>
                </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                
                <div>
                    <label class="label-text">[2] ค่า Stat ฝั่งโจมตี (Attacker Stat)</label>
                    <input type="number" id="i2" class="input-box" placeholder="e.g. STR/INT">
                </div>
                <div>
                    <label class="label-text">[3] Status Atk %</label>
                    <input type="number" id="i3" class="input-box" placeholder="e.g. 15">
                </div>

                <div>
                    <label class="label-text">[4] CC Atk % (Specific)</label>
                    <input type="number" id="i4" class="input-box" placeholder="e.g. 20">
                </div>
                <div>
                    <label class="label-text">[5] ค่า Stat ฝั่งรับ (โอกาส/Chance)</label>
                    <input type="number" id="i5" class="input-box" placeholder="e.g. VIT/LUK">
                </div>

                <div>
                    <label class="label-text">[6] ค่า Stat ฝั่งรับ (เวลา/Time)</label>
                    <input type="number" id="i6" class="input-box" placeholder="e.g. VIT/INT">
                </div>
                <div>
                    <label class="label-text">[7] Resist % (กันสถานะเฉพาะ)</label>
                    <input type="number" id="i7" class="input-box" placeholder="e.g. 10">
                </div>

                <div>
                    <label class="label-text">[8] CC Res % (กันสถานะรวม)</label>
                    <input type="number" id="i8" class="input-box" placeholder="e.g. 5">
                </div>
                <div>
                    <label class="label-text text-yellow-400">[9] ระยะเวลาพื้นฐานสกิล (วินาที)</label>
                    <input type="number" id="i9" class="input-box border-yellow-700 focus:border-yellow-500" placeholder="e.g. 3.0 (ถ้าไม่ใส่ = คำนวณ %)">
                </div>
            </div>

            <button id="btnCalc" class="w-full mt-2 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-500 hover:to-indigo-500 text-white font-bold py-3 rounded-lg shadow-lg transform transition hover:scale-[1.01] active:scale-[0.99]">
                คำนวณผลลัพธ์ (CALCULATE)
            </button>

        </div>

        <div id="res-panel" class="hidden bg-gray-900 border-t border-gray-700 p-6">
            <div class="grid grid-cols-2 gap-8 text-center">
                <div class="relative group">
                    <h3 class="text-gray-400 text-xs font-bold uppercase tracking-widest mb-2">โอกาสติด (CHANCE)</h3>
                    <div class="text-4xl font-extrabold text-transparent bg-clip-text bg-gradient-to-b from-green-400 to-green-600">
                        <span id="out-chance">0</span><span class="text-2xl">%</span>
                    </div>
                </div>
                
                <div class="relative group border-l border-gray-800">
                    <h3 class="text-gray-400 text-xs font-bold uppercase tracking-widest mb-2">ระยะเวลา (DURATION)</h3>
                    <div class="text-4xl font-extrabold text-transparent bg-clip-text bg-gradient-to-b from-yellow-400 to-orange-500">
                        <span id="out-time">0</span>
                    </div>
                    <p id="out-time-unit" class="text-xs text-gray-500 mt-1">วินาที</p>
                </div>
            </div>
        </div>

        <div class="bg-gray-800 p-2 text-center border-t border-gray-700">
            <p class="text-[10px] text-gray-600">Protected Algorithm © 2024 | Secure Calculation Module</p>
        </div>
    </div>

    <script>
        (function() {
            // --- Configuration Data (Obfuscated) ---
            // Format: [Name, BaseChance%, AtkStat, DefChanceStat, DefTimeStat, TimeDivisor]
            const _DB = [
                ["Stun (มึนงง)",    100, "STR", "VIT+AGI", "VIT", 1250],
                ["Silence (ใบ้)",   100, "DEX", "VIT+STR", "VIT", 1000],
                ["Blind (ตาบอด)",    30, "STR", "INT+DEX", "INT", 500],
                ["Curse (คำสาป)",    30, "LUK", "LUK",     "LUK", 1000],
                ["Sleep (หลับ)",     30, "INT", "INT",     "INT", 1000],
                ["Fear (กลัว)",      30, "STR", "INT",     "INT", 1000],
                ["Freeze (แช่แข็ง)", 30, "INT", "MDEF",    "MDEF", 1000],
                ["Bleed (เลือดออก)", 30, "STR", "AGI",     "AGI", 1000],
                ["Poison (พิษ)",     30, "STR", "VIT",     "VIT", 1000]
            ];

            const el = (id) => document.getElementById(id);

            // Init UI
            const sel = el('i1');
            _DB.forEach((d, i) => {
                let op = document.createElement('option');
                op.value = i;
                op.text = d[0];
                sel.add(op);
            });

            // Update Hints
            const updateHints = () => {
                const d = _DB[sel.value];
                el('hint-atk').innerText = `[2] ใช้: ${d[2]}`;
                el('hint-def').innerText = `[5] แก้ทาง: ${d[3]} | [6] ลดเวลา: ${d[4]}`;
            };
            sel.addEventListener('change', updateHints);
            updateHints(); // Initial call

            // Main Calculation Logic
            el('btnCalc').addEventListener('click', () => {
                try {
                    // Fetch Inputs [1] - [9]
                    const idx = parseInt(el('i1').value);
                    const v2 = parseFloat(el('i2').value) || 0; // Atk Stat
                    const v3 = parseFloat(el('i3').value) || 0; // Status Atk %
                    const v4 = parseFloat(el('i4').value) || 0; // CC Atk %
                    const v5 = parseFloat(el('i5').value) || 0; // Def Stat (Chance)
                    const v6 = parseFloat(el('i6').value) || 0; // Def Stat (Time)
                    const v7 = parseFloat(el('i7').value) || 0; // Resist %
                    const v8 = parseFloat(el('i8').value) || 0; // CC Res %
                    const v9 = parseFloat(el('i9').value) || 0; // Base Duration (Sec)

                    const data = _DB[idx];
                    
                    // --- 1. Chance Calculation ---
                    // Base + (AtkStat - DefStat)*0.2 + Modifiers
                    let chance = data[1] + ((v2 - v5) * 0.2);
                    chance = chance + v3 + v4 - v7 - v8;
                    
                    if (chance < 0) chance = 0;
                    if (chance > 100) chance = 100; // Visual cap, though some games allow >100

                    // --- 2. Duration Calculation ---
                    // TimeFactor = (1 - DefStat/Divisor) * (1 - CCRes - Res)
                    // Note: In some formulas, Resist reduces chance only, but often affects time too.
                    // Assuming Standard Logic: Stat reduces base time, Res reduces final time.
                    
                    let timeReducStat = v6 / data[5]; // e.g. 250 VIT / 1250 = 0.2 (20% reduction)
                    if (timeReducStat > 1) timeReducStat = 1;
                    
                    // Resistance Multiplier (Treating Inputs 7 & 8 as % reduction to time as well)
                    // If strictly separate: Modify this line.
                    let resistMult = 1 - ((v7 + v8) / 100);
                    if (resistMult < 0) resistMult = 0;

                    let finalTimePct = (1 - timeReducStat) * resistMult;
                    
                    // Display Logic
                    el('out-chance').innerText = chance.toFixed(2);
                    
                    if (v9 > 0) {
                        // If Base Duration [9] is provided, show Seconds
                        let finalSec = v9 * finalTimePct;
                        el('out-time').innerText = finalSec.toFixed(3); // 3 decimals for precision
                        el('out-time-unit').innerText = `วินาที (จากพื้นฐาน ${v9} วิ)`;
                    } else {
                        // If not provided, show %
                        el('out-time').innerText = (finalTimePct * 100).toFixed(2) + "%";
                        el('out-time-unit').innerText = "ของระยะเวลาปกติ";
                    }

                    // Show Result Panel with Animation
                    const resPanel = el('res-panel');
                    resPanel.classList.remove('hidden');
                    resPanel.scrollIntoView({ behavior: 'smooth', block: 'nearest' });

                } catch (err) {
                    console.error("Err", err);
                    alert("กรุณากรอกตัวเลขให้ครบถ้วน");
                }
            });

        })();
    </script>
</body>
</html>
